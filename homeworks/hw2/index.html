<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Homework 2</title>
  <link rel="stylesheet" href="../../css/style.css">
  <link rel="stylesheet" href="../../css/homework.css">
  <link rel="stylesheet" href="./homework.css">
</head>

<body class="homework-page">
  <header>
        <h1>
            <a href="../../index.html" id="homeButton">
                <span class="icon">üè†</span> 
                Portfolio Homework
            </a>
        </h1>
    </header>

  <main>
    <!-- intro -->
    <section class="homeworkHeader">
      <h2>Homework 2</h2>
      <p><strong>Deadline:</strong> 2025-10-16</p>
    </section>

    <!-- assignment 1 -->
    <section class="assignement">

      <div class="assignement-description">
        <p><strong>Assignment 1:</strong> Explain the concept of dataset and distribution </p>
      </div>

      <div class="assignement-result">
        <h4>Concept of Dataset</h4>
          <p>
            A <strong>dataset</strong> is a collection of data points organized in a structured form, often as a table with rows (observations) and columns (variables). Each row represents an individual record, and each column represents a feature or attribute. For example, a dataset of students might include their names, ages, and grades.
          </p>

        <h4>Concept of Distribution</h4>
          <p>
              A <strong>distribution</strong> describes how values of a variable are spread out ‚Äî that is, the pattern or frequency with which different values occur. It shows whether the data are clustered around certain values, evenly spread, or skewed.
          </p>

        <h4>Relationship Between Dataset and Distribution</h4>
          <p>
              A dataset is the actual sample of data collected, while a distribution is the underlying pattern that the dataset represents. In other words, the dataset is what you have; the distribution is how those values are arranged or behave statistically.
          </p>
      </div>
    
    </section>

    <!-- assignment 2 -->
    <section class="assignement">

      <div class="assignement-description">
        <p>
          <strong>Assignment 2:</strong>
          Create a simple dataset and compute the K univariate distribution (K&#60=3)
        </p>
      </div>

      <div class="assignement-process">
        <h4>First Step</h4>
        <p>
          In this case I used a python script that is a self-contained data pipeline that manages, analyzes, and visualizes a small dataset using an SQLite database and the Matplotlib library.
        </p>
        <p>
          In particular, it connects to a local SQLite database file and populates it with initial sample (random!!) data.
        </p>

        <pre><code>
          conn = sqlite3.connect("people_db.sqlite")
          cur = conn.cursor()
          cur.execute("""
              CREATE TABLE IF NOT EXISTS people (
                  name TEXT PRIMARY KEY,
                  eye_color TEXT,
                  hair_color TEXT,
                  weight REAL
              )
          """)

          # Liste di possibili valori
          names = [
              "Alice", "Bob", ...
          ]

          eye_colors = ["blue", "green", "brown", "hazel", "gray"]
          hair_colors = ["blonde", "brown", "black", "red", "gray"]

          # Genera dati casuali
          people_data = []
          for name in names:
              eye = random.choice(eye_colors)
              hair = random.choice(hair_colors)
              weight = round(random.uniform(50, 100), 1)  # peso tra 50 e 100 kg
              people_data.append((name, eye, hair, weight))

          # Inserisci i dati nel database
          cur.executemany("""
              INSERT OR REPLACE INTO people (name, eye_color, hair_color, weight)
              VALUES (?, ?, ?, ?)
              """, people_data)

          conn.commit()
        </code></pre>

        <p>So, now I have my small db (the img below is only a part)</p>
        <figure class="gallery-item">
          <img src="./img/tabella.jpg" alt="db image" style="max-width: 300px; height: auto;">
          <figcaption>Some rows of small local db</figcaption>
        </figure>
        

        <h4>Second step</h4>
        <p>On this small db. the python script performs a univariate distribution for each K. It runs SQL queries to calculate the distribution and then, using matplotlib, shows the result.</p>

        Distribution for eye_color in SQL ...
        <pre><code>
          #üëÅÔ∏è Distribuzione colori occhi
          cur.execute("""
              SELECT eye_color, COUNT(*)
              FROM people
              GROUP BY eye_color;
          """)
        </code></pre>

        ... and then using matplotlib

        <pre><code>
          # Legge tutti i dati
          cur.execute("SELECT eye_color, hair_color, weight FROM people")
          rows = cur.fetchall()

          # Separa le colonne
          eye_colors = [row[0] for row in rows]

          # Distribuzione dei colori occhi
          eye_distribution = Counter(eye_colors)
          plt.figure(figsize=(6,4))
          plt.bar(eye_distribution.keys(), eye_distribution.values(), color='skyblue')
          plt.title("Distribuzione colori occhi")
          plt.xlabel("Colore occhi")
          plt.ylabel("Numero di persone")
          plt.show()
        </code></pre>
      </div>

      <div class="assignement-result">
        <p>In the image below the reesult of plot for eye_color distribution</p> 
        <figure class="gallery-item">
            <img src="./img/eye_color.png" alt="Distribuzione colori occhi">
            <figcaption>Distribution of Eye Color</figcaption>
        </figure>
        <p>The same thing was done for hair_color distribution and weight distribution with the following results:</p>

        <div class="image-gallery">
            <figure class="gallery-item">
                <img src="./img/hair_color.png" alt="Distribuzione colori capelli">
                <figcaption>Distribution of Hair Color</figcaption>
            </figure>

            <figure class="gallery-item">
                <img src="./img/wheight.png" alt="Distribuzione peso">
                <figcaption>Distribution of Weight</figcaption>
            </figure>
        </div>
      </div>
  
    </section>

    <!-- assignment 3 -->
    <section class="assignement">

      <div class="assignement-description">
        <p>
          <strong>Assignment 3 (for champion): </strong>
          With the small dataset of assignment 2, compute bivariate distribution.
        </p>
      </div>

      <div class="assignement-process">
        <p>
          For this assignment, we will consider bivariate distribuition on eye_color and hair_color. 
        </p>
        <p>
          Like in assignment 2, we use python script with sqlite. In particular, in order to process bivariate distribution on eye_color e hair_color, we use the function below. 
        </p>
        <pre><code>
          # bivariate distribution on eye_color, hair_color
          query = """
              SELECT eye_color, hair_color, COUNT(*) AS count
              FROM people GROUP BY eye_color, hair_color ORDER BY eye_color, hair_color;
          """
          cur.execute(query)
        </code></pre>
    
      </div>
      
      <div class="assignement-result">
        <p>
          As the assignment 2, using matplotlib we can see te result (fig below).
        </p>

        <figure class="gallery-item">
          <img src="./img/bivariate.png" alt="Bivariate distribution">
          <figcaption>Some rows of small local db</figcaption>
        </figure>
      </div>

    </section>

    <!-- assignment 4 -->
    <section class="assignement">

      <div class="assignement-description">
        <p>
          <strong>Assignment 4: </strong> Take a text and compute the distribution of the letters. Then apply a Ceaser Cipher, Now decode (using the "Language distribution") the encryption text assuming that you don't know the shift.
        </p>
      </div>

      <div class="assignement-process">
        <!-- step 1 -->
        <div class="step">
          <h1>First step</h1>
          <p>
            For this assignement javascript has been used. In particular, for this step, given a plaintext, with a js function (see below), the function process the distribution of the letters in that text.
          </p>
          <pre><code>
            function calculateFrequency(text) {
                const alphabet = 'abcdefghijklmnopqrstuvwxyz';
                const letterCounts = {};
                for (const char of text) {
                    if (alphabet.includes(char)) {
                        letterCounts[char] = (letterCounts[char] || 0) + 1;
                    }
                }
                const chartLabels = alphabet.split('');
                const chartData = chartLabels.map(letter => letterCounts[letter] || 0);
                return { labels: chartLabels, data: chartData };
            }
          </code></pre>
          <p>
            Then, thanks to Chart.js library, we get the distribution chart. Below an example.
          </p>
          <div id="exampleBoxChart">
            <p>
              <strong>example text: </strong>Hello World! My name is Christian
            </p>
            <div class="chart-container">
              <canvas id="exampleChart"></canvas>
            </div>
            
          </div>
        </div>

        <!-- step 2 -->
        <div class="step">
          
          <h1>Second step</h1>

          <p>
            In this step, given a shift key, with a js funtion (see below), we process the plaintext in order to apply Ceaser Ciphrer...
          </p>  

          <pre><code>
            function caesarCipher(text, shift) {
                const alphabet = 'abcdefghijklmnopqrstuvwxyz';
                let cipheredText = '';

                for (const char of text) {
                    const index = alphabet.indexOf(char);
                    if (index !== -1) { 
                        const newIndex = (index + shift) % 26;
                        cipheredText += alphabet[newIndex];
                    } else { 
                        cipheredText += char;
                    }
                }
                return cipheredText;
            }
          </code></pre>

          <p>
            ... and then compute the distribution again. Below the complete example (with shift key = 3).
          </p>
          <div id="example2BoxChart">
            <p>
              <strong>example text: </strong>Hello World! My name is Christian
            </p>
            <div class="chart-container">
              <canvas id="examplePlainedChart"></canvas>
            </div>
            <div class="chart-container">
              <canvas id="exampleCipheredChart"></canvas>
            </div>
          </div>

        </div>
      
        <!-- step 3 -->
        <div class="step">

          <h1>Third step</h1>

          <p>
            Now we have to try to find the shift key, so we can decode the cipher text!. Obviously, we assume that we don't know the key, but we know each the distributions (plain and cipher text). 
          </p>
          <p>
            The ide: <strong>Matching the Shapes</strong>
          </p>
          <p>
            The two distributions (the bar charts) are two silhouettes or mountain profiles. One is the original shape, the other is the same shape but shifted sideways. So, for each position, we measure how much the two shapes overlap or differ. The position where the two silhouettes match almost perfectly ‚Äî that is, where the total difference between their heights is minimal ‚Äî reveals the encryption key. Below the js function. 
          </p>
          <pre><code>
            function findShiftKeyByMinDifference(originalFreq, cipherFreq) {
                let bestShift = 0;
                let minDifference = Infinity;

                for (let shift = 0; shift < 26; shift++) {
                    let currentDifference = 0;

                    for (let i = 0; i < 26; i++) {
                        
                        const shiftedIndex = (i + shift) % 26;
                        
                        const freqOriginal = originalFreq[i];
                        const freqCipherShifted = cipherFreq[shiftedIndex];

                        currentDifference += Math.pow(freqOriginal - freqCipherShifted, 2);
                    }

                    if (currentDifference < minDifference) {
                        minDifference = currentDifference;
                        bestShift = shift;
                    }
                }

                return bestShift;
            }
          </code></pre>
        </div>

      </div>


      <div class="assignement-result">
        
        <div class="simulator">
          <h1>Simulator</h1>
          <p>Enter a text and an encryption key to analyze the distribution of letters.</p>

          <textarea id="textInput" rows="8" placeholder="Scrivi o incolla il tuo testo qui...">Era un vecchio che pescava da solo in una barca nella Corrente del Golfo, e da ottantaquattro giorni non prendeva un pesce. Nei primi quaranta giorni un ragazzo era stato con lui. Ma dopo quaranta giorni senza una sola preda, i genitori del ragazzo gli avevano detto che il vecchio era definitivamente e irrimediabilmente ‚Äúsalao‚Äù, cio√® il pi√π sfortunato fra gli uomini; e il ragazzo, obbedendo, era andato su un‚Äôaltra barca che aveva preso tre pesci grossi nella prima settimana. Il ragazzo si rattristava ogni volta che vedeva il vecchio tornare colla barca vuota, e ogni sera scendeva ad aiutarlo a portare le lenze arrotolate o la vela che era rattoppata con sacchi di farina e arrotolata assomigliava alla bandiera della sconfitta perenne.</textarea>
        
          <div class="cipher-controls">
              <label for="shiftKey">Shift key:</label>
              <input type="number" id="shiftKey" value="3" min="1" max="25">
          </div>
          
          <button id="analyzeButton">Process</button>

          <div class="charts-wrapper">
            <h3>Distribution of plaintext</h3>
            <div class="chart-container">  
              <canvas id="originalChart"></canvas>
            </div>
            <h3>Distribution of ciphertext</h3>
            <div class="chart-container">
              <canvas id="cipherChart"></canvas>
            </div>
          </div>

          <div class="result-container">
            <h3>Hack the key</h3>
            <p>Shift key used to encrypt: <strong id="foundKeyResult">-</strong></p>
          </div>

        </div>

      </div>
      
    </section>

  </main>

  <footer>
    <p><a href="../../index.html">‚Üê Torna alla homepage</a></p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>       
  <script src="main.js"></script>

</body>
</html>
